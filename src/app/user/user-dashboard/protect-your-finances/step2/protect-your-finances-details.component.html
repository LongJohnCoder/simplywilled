<div class="pageLoader" *ngIf="loading">
  <div class="loaderInner">
    <img src="../../../../assets/images/owl-loading.gif" alt="Loading...">
    <p class="loadingTxt">
      Please Wait
      <span></span>
      <span></span>
      <span></span>
    </p>
  </div>
</div>

<div class='finances' *ngIf="!loading">
    <form [formGroup] = "poaDetailsForm" (ngSubmit)="send()">
      <div class="main-content tellusaboutyou" >
        <h2>Name Your Financial Power Of Attorney
          <app-global-tooltip (click)="toolTipClicked('f_poa')" [tooltipMessages]='toolTipMessageList.f_poa' toolTipType="f_poa"></app-global-tooltip>
        </h2>
        <!-- <app-fianance [data]="poaDetailsForm.get('attorney_holders')"></app-fianance> -->

        <div>
            <div class="form-group">
              <label>Financial Power of Attorney's Full Legal Name:</label>
              <input
                      type="text"
                      class="form-control"
                      formControlName="fullname"
                      placeholder="Full legal name"
                      required
                      [ngClass]='{"error_input": poaDetailsForm.get("fullname").touched && poaDetailsForm.get("fullname").invalid}'
                      name ='fullname'>

              <span class="error_txt"
                    *ngIf="poaDetailsForm.get('fullname').touched && poaDetailsForm.get('fullname').dirty && poaDetailsForm.get('fullname').hasError('required')">
                    Please enter a properly capitalized first power attorney name
              </span>

              <span class="error_txt"
                    *ngIf="poaDetailsForm.get('fullname').touched && poaDetailsForm.get('fullname').dirty && poaDetailsForm.get('fullname').hasError('pattern')">
                    Please enter a properly capitalized first power attorney name
              </span>
            </div>


            <div class="form-group">
              <label>Financial Power of Attorney's relationship to you:</label>

              <select class="form-control" #selectRelationship (change)="relationshipChange('relationship',selectRelationship.value)" formControlName="relationship">
                <option value="">Select Relationship</option>
                <option value="Wife">Wife</option>
                <option value="Husband">Husband</option>
                <option value="Mother">Mother</option>
                <option value="Father">Father</option>
                <option value="Son">Son</option>
                <option value="Daughter">Daughter</option>
                <option value="Sister">Sister</option>
                <option value="Brother">Brother</option>
                <option value="Aunt">Aunt</option>
                <option value="Uncle">Uncle</option>
                <option value="Cousin">Cousin</option>
                <option value="Friend">Friend</option>
                <option value="Other">Other</option>
              </select>

            </div>

            <div class="form-group" *ngIf="poaDetailsForm.get('relationship').value == 'Other'">
              <label>Mention your relationship</label>
              <input
                type="text"
                class="form-control"
                formControlName="other_relationship"
                required
                name ='other_relationship'>
            </div>

            <div class="form-group">
              <!--<label>What is their address? </label>
              <input
                      type="text"
                      class="form-control"
                      formControlName="address"
                      required
                      [ngClass]='{"error_input": poaDetailsForm.get("address").touched && poaDetailsForm.get("address").dirty && poaDetailsForm.get("address").hasError("required")}'
                      name ='address'>

              <span class="error_txt"
                    *ngIf="poaDetailsForm.get('address').touched && poaDetailsForm.get('address').dirty && poaDetailsForm.get('address').hasError('required')">
                    Please enter first power attorney address
              </span>-->
              <label>Financial Power of Attorney's Address:</label>
              <input
                type="text"
                class="form-control"
                placeholder="Address Line 1"
                formControlName="address"
                required
                [ngClass]='{"error_input": poaDetailsForm.get("address").touched && poaDetailsForm.get("address").invalid}'
                name ='address'
              >
              <div *ngIf="poaDetailsForm.get('address').dirty && poaDetailsForm.get('address').touched">
                <span class="error_txt" *ngIf="poaDetailsForm.get('address').hasError('required')" >Address is required</span>
              </div>

              <div class="row">

                <div class="col-md-6">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="City"
                    formControlName="city"
                    required
                    [ngClass]='{"error_input": poaDetailsForm.get("city").touched && poaDetailsForm.get("city").invalid}'
                  >
                  <div *ngIf="poaDetailsForm.get('city').dirty && poaDetailsForm.get('city').touched">
                    <span class="error_txt" *ngIf="poaDetailsForm.get('city').hasError('required')" >City is required</span>
                  </div>
                </div>

                <div class="col-md-6">
                  <select class="form-control" formControlName="state" [ngClass]='{"error_input": poaDetailsForm.get("state").touched && poaDetailsForm.get("state").invalid}'>
                    <option value="">States</option>
                    <option *ngFor="let state of states" [value]="state">{{state}}</option>
                  </select>
                  <div
                    *ngIf="poaDetailsForm.get('state').dirty && poaDetailsForm.get('state').touched"
                  >
                    <span class="error_txt" *ngIf="poaDetailsForm.get('state').hasError('required')">State is required</span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Zip Code"
                    formControlName="zip"
                    required
                    [ngClass]='{"error_input": poaDetailsForm.get("zip").touched && poaDetailsForm.get("zip").invalid}'
                  >
                  <div
                    *ngIf="poaDetailsForm.get('zip').dirty && poaDetailsForm.get('zip').touched"
                  >
                    <span class="error_txt" *ngIf="poaDetailsForm.get('zip').hasError('required')">Zip is required</span>
                    <span class="error_txt" *ngIf="poaDetailsForm.get('zip').hasError('pattern')">Please provide a proper zip</span>

                  </div>
                </div>
                <div class="col-md-6">
                  <input type="text" class="form-control" placeholder="Country" formControlName="country" [value]="'United States'" readonly>
                </div>
              </div>
            </div>


            <div class="form-group">
              <label>Financial Power of Attorney's Phone Number:</label>
              <input
                type="text"
                class="form-control"
                formControlName="phone"
                [ngClass]='{"error_input": poaDetailsForm.get("phone").touched && poaDetailsForm.get("phone").invalid}'
                #phone
                mask="(000)-000-0000"
                placeholder="(xxx)-xxx-xxxx"
                name ='phone'>

                <span class="error_txt"
                  *ngIf="poaDetailsForm.get('phone').touched && poaDetailsForm.get('phone').dirty && poaDetailsForm.get('phone').hasError('required')">
                    Please enter first power attorney phone
                </span>

                <span class="error_txt"
                    *ngIf="poaDetailsForm.get('phone').touched && poaDetailsForm.get('phone').dirty && poaDetailsForm.get('phone').hasError('minlength')">
                    Please provide a  first power attorney phone
                </span>
            </div>

            <div class="form-group">
              <label>Would you like to inform this person that you appointed them as your Financial Power of Attorney?</label>
              <ul class="radio_ul6">
                <li>
                  <label class="radio_custom" [ngClass]='{active: (poaDetailsForm.get("is_inform").value === 1)}' style="float: left;">
                    <input type="radio" formControlName="is_inform" #isInformYes value=1 (click)="changeMe('is_inform', 1)">
                    <span class="human_status">Yes</span>
                  </label>
                  <div class="email-box" *ngIf="poaDetailsForm.get('is_inform').value === 1" [ngClass] = "{'valid': poaDetailsForm.get('email').valid, 'invalid': poaDetailsForm.get('email').invalid && poaDetailsForm.get('email').touched}">
                    <input type="email" placeholder="Enter Email Address" class="form-control"  required
                    name ='email'
                    formControlName = "email">
                   <!-- <span class="error_txt"
                    *ngIf="poaDetailsForm.get('email').touched && poaDetailsForm.get('email').dirty && poaDetailsForm.get('email').hasError('required')">
                    Please enter email
                </span>
-->
              <!--<span class="error_txt"
                    *ngIf="poaDetailsForm.get('email').touched && poaDetailsForm.get('email').dirty && poaDetailsForm.get('email').hasError('pattern')">
                    Please enter valid email
                </span>-->
                    <i class="fa fa-check" *ngIf="poaDetailsForm.get('email').valid"></i>
                    <i class="fa fa-times" *ngIf="poaDetailsForm.get('email').invalid && poaDetailsForm.get('email').touched"></i>
                  </div>
                </li>
                <li>
                  <label class="radio_custom" [ngClass]='{active: (poaDetailsForm.get("is_inform").value === 0)}'>
                    <input type="radio" formControlName="is_inform" #isInformNo value=0 (click)="changeMe('is_inform', 0)">
                    <span class="human_status">No</span>
                  </label>
                </li>
              </ul>
            </div>

            <!-- <div class="form-group" *ngIf='poaDetailsForm.get("is_inform").value === 1'>
              <label>What is their email address?</label>
              <input
                    type = "text"
                    class = "form-control"
                    required
                    name ='email'
                    formControlName = "email">


              <span class="error_txt"
                    *ngIf="poaDetailsForm.get('email').touched && poaDetailsForm.get('email').dirty && poaDetailsForm.get('email').hasError('required')">
                    Please enter first power attorney email
                </span>

              <span class="error_txt"
                    *ngIf="poaDetailsForm.get('email').touched && poaDetailsForm.get('email').dirty && poaDetailsForm.get('email').hasError('pattern')">
                    Please enter valid email address
                </span>
            </div> -->

          </div>


          <div class="form-group valid">
            <label>Would you like to appoint a Backup Financial Power of Attorney?
              <app-global-tooltip (click)="toolTipClicked('f_poa_backup')" [tooltipMessages]='toolTipMessageList.f_poa_backup' toolTipType="f_poa_backup"></app-global-tooltip>
            </label>
            <ul class="radio_ul6">
                <li>
                  <label class="radio_custom" [ngClass]='{active: (poaDetailsForm.get("is_backupattorney").value == 1)}'>
                    <input type="radio" required="true" formControlName="is_backupattorney" value=1 (click)="changeMe('is_backupattorney', 1)">
                    <span class="human_status">Yes</span>
                  </label>
                </li>
                <li>
                  <label class="radio_custom" [ngClass]='{active: (poaDetailsForm.get("is_backupattorney").value == 0)}'>
                    <input type="radio" required="true" formControlName="is_backupattorney" value=0 (click)="changeMe('is_backupattorney', 0)">
                    <span class="human_status">No</span>
                  </label>
                </li>
            </ul>
          </div>

        <div *ngIf='poaDetailsForm.get("is_backupattorney").value == 1'>
          <h2>Name Your Backup Financial Power Of Attorney</h2>
          <!-- <app-fianance></app-fianance> -->
          <div>
              <div class="form-group">
                <label>Backup Financial Power of Attorney's Full Legal Name:</label>
                <input
                        type="text"
                        class="form-control"
                        formControlName="backup_fullname"
                        placeholder="Full legal name"
                        [ngClass]='{"error_input": poaDetailsForm.get("backup_fullname").touched && poaDetailsForm.get("backup_fullname").invalid}'
                        required
                        name ='backup_fullname'>

                <span class="error_txt"
                      *ngIf="poaDetailsForm.get('backup_fullname').touched && poaDetailsForm.get('backup_fullname').hasError('required')">
                    Please enter a properly capitalized second power attorney name
                </span>

                <span class="error_txt"
                      *ngIf="poaDetailsForm.get('backup_fullname').touched && poaDetailsForm.get('backup_fullname').hasError('pattern')">
                    Please enter a properly capitalized second power attorney name
                </span>
              </div>

              <div class="form-group">
                <label>Backup Financial Power of Attorney's relationship to you:</label>

                <select class="form-control" #selectBackupRelationship (change)="relationshipChange('backup_relationship', selectBackupRelationship.value)" formControlName="backup_relationship">
                  <option value="">Select Relationship</option>
                  <option value="Wife">Wife</option>
                  <option value="Husband">Husband</option>
                  <option value="Mother">Mother</option>
                  <option value="Father">Father</option>
                  <option value="Son">Son</option>
                  <option value="Daughter">Daughter</option>
                  <option value="Sister">Sister</option>
                  <option value="Brother">Brother</option>
                  <option value="Aunt">Aunt</option>
                  <option value="Uncle">Uncle</option>
                  <option value="Cousin">Cousin</option>
                  <option value="Friend">Friend</option>
                  <option value="Other">Other</option>
                </select>

              </div>

              <div class="form-group" *ngIf="poaDetailsForm.get('backup_relationship').value == 'Other'">
                <label>Mention your relationship </label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="backup_other_relationship"
                  required
                  name ='other_relationship'>
              </div>

              <!--<div class="form-group">
                <label>What is their address? </label>
                <input
                        type="text"
                        class="form-control"
                        formControlName="backup_address"
                        required
                        [ngClass]='{"error_input": poaDetailsForm.get("backup_address").touched && poaDetailsForm.get("backup_address").dirty && poaDetailsForm.get("backup_address").hasError("required")}'
                        name ='address'>

                <span class="error_txt"
                      *ngIf="poaDetailsForm.get('backup_address').touched && poaDetailsForm.get('backup_address').dirty && poaDetailsForm.get('backup_address').hasError('required')">
                    Please enter second power attorney address
                </span>
              </div>-->

              <div class="form-group">
                <label>Backup Financial Power of Attorney's Address:</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="backup_address"
                  placeholder="Address Line 1"
                  required
                  [ngClass]='{"error_input": poaDetailsForm.get("backup_address").touched && poaDetailsForm.get("backup_address").invalid}'
                  name ='backup_address'
                >
                <div *ngIf="poaDetailsForm.get('backup_address').touched">
                  <span class="error_txt" *ngIf="poaDetailsForm.get('backup_address').hasError('required')" >Address is required</span>
                </div>

                <div class="row">

                  <div class="col-md-6">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="City"
                      formControlName="backup_city"
                      required
                      [ngClass]='{"error_input": poaDetailsForm.get("backup_city").touched && poaDetailsForm.get("backup_city").invalid}'
                    >
                    <div *ngIf="poaDetailsForm.get('backup_city').touched">
                      <span class="error_txt" *ngIf="poaDetailsForm.get('backup_city').hasError('required')" >City is required</span>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <select class="form-control" formControlName="backup_state" [ngClass]='{"error_input": poaDetailsForm.get("backup_state").touched && poaDetailsForm.get("backup_state").invalid}'>
                      <option value="">States</option>
                      <option *ngFor="let state of states" [value]="state">{{state}}</option>
                    </select>
                    <div
                      *ngIf="poaDetailsForm.get('backup_state').touched"
                    >
                      <span class="error_txt" *ngIf="poaDetailsForm.get('backup_state').hasError('required')">State is required</span>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Zip Code"
                      formControlName="backup_zip"
                      required
                      [ngClass]='{"error_input": poaDetailsForm.get("backup_zip").touched && poaDetailsForm.get("backup_zip").invalid}'
                    >
                    <div
                      *ngIf="poaDetailsForm.get('backup_zip').touched"
                    >
                      <span class="error_txt" *ngIf="poaDetailsForm.get('backup_zip').hasError('required')">Zip is required</span>
                      <span class="error_txt" *ngIf="poaDetailsForm.get('backup_zip').hasError('pattern')">Please provide a proper zip</span>

                    </div>
                  </div>
                  <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="Country" formControlName="backup_country" [value]="'United States'" readonly>
                  </div>
                </div>
              </div>


              <div class="form-group">
                <label>Backup Financial Power of Attorney's Phone Number:</label>
                <input
                        type="text"
                        class="form-control"
                        formControlName="backup_phone"
                        mask="(000)-000-0000"
                        placeholder="(xxx)-xxx-xxxx"
                        [ngClass]='{"error_input": poaDetailsForm.get("backup_phone").touched && poaDetailsForm.get("backup_phone").invalid}'
                        required
                        name ='phone'>

                <span class="error_txt"
                      *ngIf="poaDetailsForm.get('backup_phone').touched && poaDetailsForm.get('backup_phone').hasError('required')">
                    Please enter second power attorney phone
                </span>

                <span class="error_txt"
                      *ngIf="poaDetailsForm.get('backup_phone').touched && poaDetailsForm.get('backup_phone').hasError('minlength')">
                    Please provide a second power attorney phone
                </span>
              </div>

              <div class="form-group">
                <label>Would you like to inform this person that you appointed them as your Backup Financial Power of Attorney?</label>
                <ul class="radio_ul6">
                  <li>
                    <label class="radio_custom" [ngClass]='{active: (poaDetailsForm.get("backup_is_inform").value === 1)}' style="float: left;">
                      <input type="radio" formControlName="backup_is_inform" #isInformYes value=1 (click)="changeMe('backup_is_inform', 1)">
                      <span class="human_status">Yes</span>
                    </label>
                    <div class="email-box" *ngIf='poaDetailsForm.get("backup_is_inform").value === 1' [ngClass] = "{'valid': poaDetailsForm.get('backup_email').valid, 'invalid': poaDetailsForm.get('backup_email').invalid && poaDetailsForm.get('backup_email').touched}">
                      <input
                      type = "text"
                      class = "form-control"
                      required
                      name ='backup_email'
                      formControlName = "backup_email"
                      placeholder="Enter Email Address"
                      >
                     <!-- <span class="error_txt"
                      *ngIf="poaDetailsForm.get('backup_email').touched && poaDetailsForm.get('backup_email').dirty && poaDetailsForm.get('backup_email').hasError('required')">
                    Please enter email
                </span>

                <span class="error_txt"
                      *ngIf="poaDetailsForm.get('backup_email').touched && poaDetailsForm.get('backup_email').dirty && poaDetailsForm.get('backup_email').hasError('pattern')">
                    Please enter valid email
                </span>-->
                      <i class="fa fa-check" *ngIf="poaDetailsForm.get('backup_email').valid"></i>
                      <i class="fa fa-times" *ngIf="poaDetailsForm.get('backup_email').invalid && poaDetailsForm.get('backup_email').touched"></i>
                    </div>
                  </li>
                  <li>
                    <label class="radio_custom" [ngClass]='{active: (poaDetailsForm.get("backup_is_inform").value === 0)}'>
                      <input type="radio" formControlName="backup_is_inform" #isInformNo value=0 (click)="changeMe('backup_is_inform', 0)">
                      <span class="human_status">No</span>
                    </label>
                  </li>
                </ul>
              </div>

              <!-- <div class="form-group" *ngIf='poaDetailsForm.get("backup_is_inform").value === 1'>
                <label>What is their email address?</label>
                <input
                      type = "text"
                      class = "form-control"
                      required
                      name ='email'
                      formControlName = "backup_email">
                <span class="error_txt"
                      *ngIf="poaDetailsForm.get('backup_email').touched && poaDetailsForm.get('backup_email').dirty && poaDetailsForm.get('backup_email').hasError('required')">
                    Please enter second power attorney email
                </span>

                <span class="error_txt"
                      *ngIf="poaDetailsForm.get('backup_email').touched && poaDetailsForm.get('backup_email').dirty && poaDetailsForm.get('backup_email').hasError('pattern')">
                    Please enter valid email address
                </span>
              </div> -->

            </div>
        </div>

        <div class="form-group" *ngIf="errors.errorFlag">
          <div class="error_txt">
            {{errors.errorMessage}}
          </div>
        </div>

        <div class="form-footer">
          <button class="btn common-button btn-grey pull-left" (click)="goBack()">Go Back</button>
          <button class="btn common-button btn-complete">Continue</button>
        </div>
      </div>
    </form>
</div>
