<div class="pageLoader" *ngIf="loader">
  <div class="loaderInner">
    <img src="../../../../../../assets/images/owl-loading.gif" alt="Loading...">
    <p class="loadingTxt">
      Please Wait
      <span></span>
      <span></span>
      <span></span>
      <br>{{respMsg}}
    </p>
  </div>
</div>

<div class="col-xs-12" *ngIf="!respType">
  <div class="main-content tellusaboutyou" >
    <h2>Complete your order</h2>
    <hr>
    <h3>Primary contact</h3>
    <p class="headingInfo"><span>Please note:</span> you can give someone else access to this order by adding them as an authorized contact in My Account.</p>
    <form #form="ngForm" autocomplete="off">
      <div class="form-group">
        <div class="row">
          <div class="col-md-6"><label>First Name:</label>
            <input type="text" name="firstName"
                   class="form-control"
                   [(ngModel)]="data.firstName" ngModel #firstName="ngModel"
                   required
            >
            <span class="error_txt" *ngIf="firstName.invalid && firstName.touched">
                <p>First Name is required</p>
              </span>
          </div>
          <div class="col-md-6">
            <label>Last Name:</label>
            <input type="text"
                   class="form-control"
                   [(ngModel)]="data.lastname" ngModel #lastname="ngModel" name="lastname"
                   required
            >
            <span class="error_txt" *ngIf="lastname.invalid && lastname.touched">
              <p>Last Name is required</p>
            </span>
          </div>
        </div>

      </div>
      <div class="form-group">
        <div class="row">
          <div class="col-md-6">
            <label>Email Address:</label>
            <input class="form-control" type="email"
                   [(ngModel)]="data.email" ngModel #email="ngModel" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$"
                    required>
            <span class="error_txt" *ngIf="email.invalid && email.touched || email.hasError('pattern')">
                  <p>Please provide a valid email id.</p>
              </span>
          </div>
          <div class="col-md-6">
            <label>Phone Number:</label>
            <input type="tel"
                   class="form-control"
                   [(ngModel)]="data.phone" ngModel #phone="ngModel" name="phone"
                   pattern="^\d{10}$" placeholder="(xxx)-xxx-xxxx" mask="(000)-000-0000"
                   required
            >
            <span class="error_txt" *ngIf="phone.invalid && phone.touched || phone.hasError('pattern')">
                  <p>Please provide a valid phone number.</p>
              </span>
          </div>
        </div>

      </div>
      <div class="form-group">
        <input type="text"
               class="form-control"
               placeholder="Address Line 1"
               [(ngModel)]="data.address1" ngModel #address1="ngModel" name="address1"
               required
        >
        <span class="error_txt" *ngIf="address1.invalid && address1.touched">
                <p>Please enter address</p>
              </span>
        <input type="text"
               class="form-control"
               [(ngModel)]="data.address2" ngModel #address2="ngModel" name="address2"
               placeholder="Address Line 2"
        >
        <div class="row">
          <div class="col-md-6">
            <input type="text"
                   class="form-control"
                   placeholder="City"
                   [(ngModel)]="data.city" ngModel #city="ngModel" name="city"
                   required
            >
            <span class="error_txt" *ngIf="city.invalid && city.touched">
                    <p>Please enter city</p>
                  </span>
          </div>

          <div class="col-md-6">
            <select class="form-control"
                    [(ngModel)]="data.state" ngModel #state="ngModel" name="state"
                    required
            >
              <option value="">State</option>
              <option value="Alabama">Alabama</option>
              <option value="Alaska">Alaska</option>
              <option value="Arizona">Arizona</option>
              <option value="Arkansas">Arkansas</option>
              <option value="California">California</option>
              <option value="Colorado">Colorado</option>
              <option value="Connecticut">Connecticut</option>
              <option value="Delaware">Delaware</option>
              <option value="District Of Columbia">District of Columbia</option>
              <option value="Florida">Florida</option>
              <option value="Georgia">Georgia</option>
              <option value="Hawaii">Hawaii</option>
              <option value="Idaho">Idaho</option>
              <option value="Illinois">Illinois</option>
              <option value="Indiana">Indiana</option>
              <option value="Iowa">Iowa</option>
              <option value="Kansas">Kansas</option>
              <option value="Kentucky">Kentucky</option>
              <option value="Louisiana">Louisiana</option>
              <option value="Maine">Maine</option>
              <option value="Maryland">Maryland</option>
              <option value="Massachusetts">Massachusetts</option>
              <option value="Michigan">Michigan</option>
              <option value="Minnesota">Minnesota</option>
              <option value="Mississippi">Mississippi</option>
              <option value="Missouri">Missouri</option>
              <option value="Montana">Montana</option>
              <option value="Nebraska">Nebraska</option>
              <option value="Nevada">Nevada</option>
              <option value="New Hampshire">New Hampshire</option>
              <option value="New Jersey">New Jersey</option>
              <option value="New Mexico">New Mexico</option>
              <option value="New York">New York</option>
              <option value="North Carolina">North Carolina</option>
              <option value="North Dakota">North Dakota</option>
              <option value="Ohio">Ohio</option>
              <option value="Oklahoma">Oklahoma</option>
              <option value="Oregon">Oregon</option>
              <option value="Pennsylvania">Pennsylvania</option>
              <option value="Rhode Island">Rhode Island</option>
              <option value="South Carolina">South Carolina</option>
              <option value="South Dakota">South Dakota</option>
              <option value="Tennessee">Tennessee</option>
              <option value="Texas">Texas</option>
              <option value="Utah">Utah</option>
              <option value="Vermont">Vermont</option>
              <option value="Virginia">Virginia</option>
              <option value="Washington">Washington</option>
              <option value="West Virginia">West Virginia</option>
              <option value="Wisconsin">Wisconsin</option>
              <option value="Wyoming">Wyoming</option>
            </select>

            <span class="error_txt" *ngIf="state.invalid && state.touched">
                    <p>Please enter state</p>
                  </span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <input type="text"
                   class="form-control"
                   [(ngModel)]="data.zip" ngModel #zip="ngModel" name="zip"
                   placeholder="Zip Code"
                   required pattern="^\d{5}$"
            >
            <span class="error_txt" *ngIf="zip.invalid && zip.touched || zip.hasError('pattern')">
                    <p>Please enter a proper zip</p>
                  </span>
          </div>
          <div class="col-md-6">
            <input type="text" class="form-control" value="United State" required disabled>
          </div>
        </div>
        <!-- <div class="row">
          <div class="col-md-12">
            <div class="error_txt">
                {{errors.errorMessage}}
            </div>
          </div>
        </div> -->

      </div>
      <hr>
      <h3 *ngIf="(paymentData.package.amount - paymentData.discountAmount) !== 0">Payment Options</h3>
      <P class="headingInfo" *ngIf="(paymentData.package.amount - paymentData.discountAmount) !== 0">Select any payment option.</P>
      <div class="form-group" *ngIf="(paymentData.package.amount - paymentData.discountAmount) !== 0">
        <button class="payPaypal" (click)="paymentMethod = 'paypal-payment'" [ngClass]="{'active': paymentMethod === 'paypal-payment'}">
          Pay With <img src="../../../../../../assets/images/paypalLogo.png" alt="PayPal">
        </button>
        <button class="payCardHead" (click)="paymentMethod = 'card-payment'" [ngClass]="{'active': paymentMethod === 'card-payment'}">
          <div class="cardIcon"><img src="../../../../../../assets/images/cardsSmall.png" alt=""></div>
          <p>
            Pay With Credit Card
            <span>We accept all major credit cards.</span>
          </p>
        </button>
        <div class="clear"></div>
      </div>
      <hr *ngIf="paymentMethod === 'card-payment'">
      <h3 *ngIf="paymentMethod === 'card-payment'">Payment Information</h3>
      <p class="headingInfo" *ngIf="paymentMethod === 'card-payment'">
        We accept all major credit cards.
      </p>
      <div class="form-group payCard" *ngIf="paymentMethod === 'card-payment'">
        <div class="cardDetails">
          <label>Card Details: </label>
          <div class="row">
            <div class="col-lg-6">
              <input type="text" class="form-control" placeholder="First Name"
                     [(ngModel)]="data.cardFirstName" ngModel #cardFirstName="ngModel" name="cardFirstName"
                     required>
              <span class="error_txt" *ngIf="cardFirstName.invalid && cardFirstName.touched">
                            <p>Please enter first name</p>
                          </span>
            </div>
            <div class="col-lg-6">
              <input type="text" class="form-control" placeholder="Last Name"
                     [(ngModel)]="data.cardLastName" ngModel #cardLastName="ngModel" name="cardLastName"
                     required>
              <span class="error_txt" *ngIf="cardLastName.invalid && cardLastName.touched">
                            <p>Please enter last name</p>
                        </span>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <div class="cardLogo"><span class={{cardtype}}></span></div>
              <input type="text" class="form-control cardNumber" placeholder="Card Number"
                     [(ngModel)]="data.cardNumber" ngModel #cardNumber="ngModel" name="cardNumber" mask="0000 0000 0000 0000"
                     pattern="^\d{16}$"
                     required #cardNum (keyup)="GetCardType(cardNum)">
              <span class="error_txt" *ngIf="cardNumber.invalid && cardNumber.touched || cardNumber.hasError('pattern')">
                    <p>Please enter proper card number</p>
                  </span>
            </div>
            <!--</div>-->
            <!--<div class="row">-->
            <div class="col-sm-6 col-lg-3">
              <input type="text" class="form-control"
                     [(ngModel)]="data.expDate" ngModel #expDate="ngModel" name="expDate" pattern="^\d{6}$" placeholder="MM/YYYY"
                    mask="00/0000" autocomplete="off" required>
              <span class="error_txt" *ngIf="expDate.invalid && expDate.touched || expDate.hasError('pattern')">
                        <p>Please enter expiry date</p>
                      </span>
            </div>
            <div class="col-sm-6 col-lg-3">
              <input type="password" class="form-control"
                     [(ngModel)]="data.cvv" ngModel #cvv="ngModel" name="cvv" autocomplete="off" pattern="^\d{3}$"
                     placeholder="CVV" required>
              <span class="askCvv" (click)="openModal(askCvvModal)">What is this?</span>
              <span class="error_txt" *ngIf="cvv.invalid && cvv.touched || cvv.hasError('pattern')">
                        <p>Please enter cvv code</p>
                      </span>
            </div>
          </div>
        </div>
        <div class="payByPaypal">

        </div>
      </div>

      <div class="form-footer">
        <button class="btn common-button btn-complete" [disabled]="!form.valid" (click)="checkout()">Continue</button>
      </div>
    </form>

  </div>

  <div class="packagesRight">
    <div class="packagesRightPanel">
      <h2>Order Summary</h2>
      <div class="packageLogo">
        <img src="../../../../../../assets/images/single-pkg-book.png" alt="">
      </div>
      <div class="packageName realPrice">{{paymentData.package.name}} <span>${{paymentData.package.amount}}</span></div>
      <div class="packageName discount">Discount Savings <span>- ${{paymentData.discountAmount}}</span></div>
      <div class="packageName totalOrder">Order Total <span>${{paymentData.package.amount - paymentData.discountAmount}}</span></div>
    </div>
    <div class="packagesRightPanel howItWorks">
      <h3>How SimplyWilled.com works after purchase</h3>
      <ol>
        <li>Complete our simple interview process at your own pace.</li>
        <li>We take your answers and create personalized state specific documents for you.</li>
        <li>Download your documents, review them, and make changes if necessary.
        </li>
        <li>Execute your estate documents using our easy to follow instructions and your done.</li>
      </ol>
    </div>
    <div _ngcontent-c1="" class="guarantee">
      <img _ngcontent-c1="" alt="" class="macfee" src="../../../../../assets/images/macfee.png">
      <img _ngcontent-c1="" alt="" class="norton" src="../../../../../assets/images/nortonBlack.png">
    </div>
  </div>

  <ng-template #askCvvModal>
    <div class="adminModal cvvModal">
      <div class="panel-body">
        <button type="button" class="close" (click)="modalRef.hide()">×</button>
        <div class="modal-body">
          <h3>Where is the CVV Number? </h3>
          <p class="cvvImg"><img src="../../../../../../assets/images/askCvv1.jpg" alt=""></p>
          <p>This number is printed on your MasterCard & Visa cards in the signature area of the back of the card. (it
            is the last 3 digits AFTER the credit card number in the signature area of the card).
          </p>
          <p class="cvvImg"><img src="../../../../../../assets/images/askCvv2.jpg" alt=""></p>
          <p>You can find your four-digit card verification number on the front of your American Express credit card
            above the credit card number on either the right or the left side of your credit card.
          </p>
          <hr>
          <h3>What is the CVV Number?</h3>
          <p>CARD VERIFICATION VALUE CODE (CVV) </p>
          <p>CVV is a new authentication procedure established by credit card companies to further efforts towards
            reducing fraud for internet transactions. It consists of requiring a card holder to enter the CVV number in
            at transaction time to verify that the card is on hand.The CVV code is a security feature for "card not
            present" transactions (e.g., Internet transactions), and now appears on most (but not all) major credit and
            debit cards. This new feature is a three- or four-digit code which provides a cryptographic check of the
            information embossed on the card. Therefore, the CVV code is not part of the card number itself.
            <br><br>
            The CVV code helps ascertain that the customer placing the order actually possesses the credit/debit card
            and that the card account is legitimate. Each credit card company has its own name for the CVV code, but it
            functions the same for all major card types. (VISA refers to the code as CVV2, MasterCard calls it CVC2, and
            American Express calls it CID.)
            <br><br>
            The back panel of most Visa/MasterCard cards contain the full 16-digit account number, followed by the
            CVV/CVC code. Some banks, though, only show the last four digits of the account number followed by the code.
            To aid in the prevention of fraudulent credit card use, we now require the 3 or 4 digit code on the back of
            your credit card. When you submit your credit card information your data is protected by Secure Socket Layer
            (SSL) technology certified by a digital certificate.</p>
        </div>
      </div>
    </div>
  </ng-template>
</div>

<div class="main-content paymentSuccess failed" *ngIf="respType && !thankYou">
    <!--<div class="main-content tellusaboutyou">-->
  <div class="failedIconBox"><div class="failedIcon" [ngClass]="{'animate' : addAnimate }"><span></span><span></span></div></div>
        <h2>Payment Failed!</h2>
        <p>{{respMsg}}</p>
    <!--</div>-->
</div>

<div class="main-content paymentSuccess" *ngIf="thankYou">
  <app-thank-you [data]="data" ></app-thank-you>
</div>
